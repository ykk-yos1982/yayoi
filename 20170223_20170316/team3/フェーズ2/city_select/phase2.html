<!DOCTYPE html>
<html lang="jp">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosansjapanese.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css?v=3.3.7">
    <link rel="stylesheet" href="./css/city-select.css?v=1.0.2" >
    <link rel="stylesheet" href="../app/css/weatherservice.css">
    <link rel="stylesheet" href="../app/css/vendor/MaterialDesignLite/material.min.css">
	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDSGAfudO7qyMiNbWN3cpUfo5LUTyB57Ek&libraries=drawing,places,geometry,visualization&v=3.27&lang=ja"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script type="text/javascript" src="https://hackerthemes.com/node_modules/jquery/dist/jquery.min.js"></script>
	<script type="text/javascript" src="https://hackerthemes.com/node_modules/tether/dist/js/tether.min.js"></script>
    <script type="text/javascript" src="./jquery/js/jquery-3.1.1.min.js?v=3.1.1"></script>
	<script type="text/javascript" src="../app/js/jquery.xdomainajax.js"></script>
    <script type="text/javascript" src="./bootstrap/js/bootstrap.min.js?v=3.3.7"></script>
	<script type="text/javascript" src="../app/js/vendor/MaterialDesignLite/material.min.js"></script>
	<script type="text/javascript" src="../app/js/map.js"></script>
    <script type="text/javascript" src="./js/prefecture.js?v=1.0.2"></script>
	<script type="text/javascript" src="../app/js/apicall.js"></script>
    <script type="text/javascript" src="./js/city-select.js?v=1.0.2"></script>
    <title>å¤©æ°—äºˆå ±ã‚µãƒ¼ãƒ“ã‚¹</title>
</head>

<body>
    <nav class="navbar navbar-default header_style">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" aria-expanded="false">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <div class="navbar-left">
                    <a class="navbar-brand" href="#">å¤©æ°—äºˆå ±ã‚µãƒ¼ãƒ“ã‚¹</a>
                </div>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right hidden-xs">
                    <li><a href="#">Menu</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="hidden-xs col-sm-6" id="map">
                <canvas class="mapCanvas" id="jp_map"></canvas>
                <ul id="contextMenu" class="dropdown-menu" role="menu">
                </ul>
            </div>
            <div class="hidden-xs col-sm-6">
                <p>å¤©æ°—ã‚’æ¤œç´¢ã—ãŸã„éƒ½é“åºœçœŒã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>
            </div>
        </div>

        <div class="row">
            <div class="visible-xs form-group">
                <label>STEP 1ã€€éƒ½é“åºœçœŒã‚’é¸æŠã—ã¦ãã ã•ã„</label>
                <select class="form-control" id="tenki-prefList">
                </select>
            </div>
            <div class="visible-xs form-group">
                <label>STEP 2ã€€åœ°åŸŸã‚’é¸æŠã—ã¦ãã ã•ã„</label>
                <select class="form-control" id="tenki-cityList">
                </select>
            </div>
        </div>

		<div class="row">
            <div class="col-xs-12">
                <p id="mousep"></p>
            </div>
		</div>
    </div>

		<section class="body__contents">
			<div>			
				<div class="regionselect">
					<div>ã“ã“ã«å¤©æ°—äºˆå ±ã®MAPã‚’é…ç½®</div>
					<div>å¤©æ°—ã‚’æ¤œç´¢ã—ãŸã„éƒ½é“åºœçœŒã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</div>
				</div>
				<p class="border"></p>
				<div class="resultsdisplay">
					<!-- å®Ÿè¡Œãƒœã‚¿ãƒ³ -->
					<p><button id="method">mapè¡¨ç¤º</button></p>
					<!-- å®Ÿè¡Œãƒœã‚¿ãƒ³ -->
					  <button data-btn-type="ajax">Data get!</button>

					<form>
						<div>
							<label for="zip">éƒµä¾¿ç•ªå·ï¼š</label><br />
							<input id="zip" type="text" size="10" />
							<input id="search" type="button" value="æ¤œç´¢" />
						</div>
						<div>
							<label for="address">ä½æ‰€ï¼š</label><br />
							<input id="address" type="text" size="35" />
						</div>
					</form>

					<div class="result">ã“ã“ã«APIã®çµæœã‚’è¡¨ç¤º
						<div class="result_map">
							<div>ç¦å³¶çœŒ yyyy/mm/ddã®å¤©æ°—ã§ã™</div>
							<div>
								<form id="idokeido">
									<input id="ido" type="text" value="35"/>
									<input id="keido" type="text" value="139"/>
									<input id="regionid" type="text" value="4000001"/>
								</form>
								<div id="map-canvas">ã“ã“ã«åœ°å›³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>
								<div>æ˜¨æ—¥ã‚ˆã‚Šæ°—æ¸©ãŒ10â„ƒä¸‹ãŒã‚Š...</div>
							</div>
						</div>
						<div class="result_detail">
							<div class="box_today">
								<ul class="wrap_today list-group">
									<li class="list-group-item head_today">ä»Šæ—¥</li>
									<li class="list-group-item nonborder">
										<div class="icon_today"><i class="material-icons">cloud_queue</i></div>
									</li>
									<li class="list-group-item nonborder">
										<div class="high_today">æœ€é«˜æ°—æ¸©:33â„ƒ</div>
										<div class="low_today">æœ€ä½æ°—æ¸©:2â„ƒ</div>
									</li>
								</ul>
							</div>
							<div class="box_tomorrow">
								<ul class="wrap_today list-group">
									<li class="list-group-item head_tomorrow">æ˜æ—¥</li>
									<li class="list-group-item"><div class="icon_tomorrow"><i class="material-icons">cloud_queue</i></div></li>
									<li class="list-group-item">
										<div class="high_tomorrow">æœ€é«˜æ°—æ¸©:33â„ƒ</div>
										<div class="low_tomorrow">æœ€ä½æ°—æ¸©:2â„ƒ</div>
									</li>
								</ul>
							</div>

							<div class="box_da_tomorrow">
								<ul class="wrap_today list-group">
									<li class="list-group-item head_tomorrow">æ˜å¾Œæ—¥</li>
									<li class="list-group-item"><div class="icon_tomorrow"><i class="material-icons">cloud_queue</i></div></li>
									<li class="list-group-item">
										<div class="high_tomorrow">æœ€é«˜æ°—æ¸©:33â„ƒ</div>
										<div class="low_tomorrow">æœ€ä½æ°—æ¸©:2â„ƒ</div>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div>
					<div class="link_title">
						and more...
					</div>
					<div class="link_detail">
						<p><a class="link_detail">è¶³ç«‹åŒº</a></p>
						<p><a class="link_detail">è¶³ç«‹åŒº</a></p>
						<p><a class="link_detail">è¶³ç«‹åŒº</a></p>
						<p><a class="link_detail">è¶³ç«‹åŒº</a></p>
						<p><a class="link_detail">è¶³ç«‹åŒº</a></p>
						<p><a class="link_detail">è¶³ç«‹åŒº</a></p>
					</div>
				</div>
			</div>
			
		</section>
		<section class="body__footer">
			ãƒ•ãƒƒã‚¿ãƒ¼
		</section>

<script src="https://code.jquery.com/jquery-1.10.2.js"></script>

<script>
$(document).ready(function () {

   var cityParam = {
       latitude: 39,
       longitude: 58,
       city_id: 400040
   };

  citySelected(cityParam);

  function citySelected(parm) {
    // åœ°å›³è¡¨ç¤º
	console.log('cityParam:' + parm.city_id);
	weather_search(parm.city_id);
    // å¤©æ°—è¡¨ç¤º  
  }

  function weather_search(id){
	    var url = 'http://weather.livedoor.com/forecast/webservice/json/v1?city=400040';
		$.ajax(url,{
			type:	 'get',
			dataType: 'json',
//			beforeSend: function( xhr ){
//      			xhr.setRequestHeader({'Access-Control-Allow-Origin' : '*'})
//		    }contentType: 'application/json',
			headers: {
				'Access-Control-Allow-Origin' : '*'
			}
		})
		.done(function(data) {
			console.log('data:' + data.results);
			if(data.results) {

			var result = $.parseXML(data.results);
					console.log('ï¿½ÏŠï¿½ï¿½ï¿½resultï¿½F' + result);
					$xml = $( result );
					$body = $xml.find("body");


					var myNode = $(result).find("body");
					console.log('myNode:' + myNode);


					console.log('result' + result);
			$('#map-canvas').val(data.results);
		// ï¿½ï¿½ï¿½gï¿½ï¿½ï¿½ï¿½ï¿½Ìê‡ï¿½ÍAï¿½Gï¿½ï¿½ï¿½[ï¿½ï¿½ï¿½bï¿½Zï¿½[ï¿½Wï¿½ğ”½‰f
			} else {
			$('#address').val(data.results);
			};
		});
  }
});

</script>

<script>
$('#method').click(function() {
	var ido = document.forms.idokeido.ido.value;
	var keido = document.forms.idokeido.keido.value;

	console.log('ido:' + ido);
	console.log('keido:' + keido);

	// LatLngLiteralã‚’ä½œæˆ
	var LatLngLiteral = {
		lat: ido,
		lng: keido
	} ;
	// åˆæœŸåŒ–ç”¨ã®é–¢æ•°
	function initFunc () {
		// ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã®è¦ç´ ã‚’å–å¾—ã™ã‚‹
		var canvas = document.getElementById( 'map-canvas' ) ;

		// è¿”ã‚Šå€¤ã®æ¡ˆå†…ã‚’ç©ºã«ã™ã‚‹
		returnFunc( "" ) ;

		// åœ°å›³ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹
		map = new google.maps.Map( canvas, {
			zoom: 18 ,
			center: new google.maps.LatLng( ido, keido ) ,
		} ) ;
	} ;

	// ãƒ¡ã‚½ãƒƒãƒ‰ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
	document.getElementById( "method" ).onclick = function () {
		// å®Ÿè¡Œ
		var result = map.setCenter( LatLngLiteral ) ;

		// è¿”ã‚Šå€¤ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤º
		console.log( "è¿”ã‚Šå€¤:", result ) ;

		// è¿”ã‚Šå€¤ã‚’è¡¨ç¤º
		returnFunc( result ) ;
	}

	// è¿”ã‚Šå€¤è¡¨ç¤ºç”¨ã®é–¢æ•°
	function returnFunc ( value ) {
		switch ( typeof value ) {
			case "undefined" :
				value = "undefined" ;
			break ;

			case "null" :
				value = "null" ;
			break ;

			case "object" :
				try {
					value = JSON.stringify( value ) ;
				} catch (e) {
				}
			break ;
		}

		//document.getElementById( "return" ).textContent = value.toString() ;
	}

	// åœ°å›³ã®è¡¨ç¤ºé–‹å§‹
	initFunc() ;

});
</script>
</body>
</html>